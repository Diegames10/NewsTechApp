<body>
  <!-- HEADER -->
  <header>
    <h1>ğŸ“° NewsTech</h1>
    <nav>
      <a href="{{ url_for('auth.publicar') }}" class="nav-link">â• Nova postagem</a>
      <div class="perfil-container">
        <button id="perfil-btn" type="button">
          <img id="avatar" src="{{ url_for('static', filename='imagens/avatar-default.jpg') }}" alt="Perfil">
          <span id="perfil-nome">Entrar</span> â–¾
        </button>
        <div class="perfil-menu" id="perfil-menu" role="menu" aria-hidden="true">
          <div class="perfil-info">
            <img id="menu-avatar" src="{{ url_for('static', filename='imagens/avatar-default.jpg') }}" alt="Foto de perfil">
            <strong id="menu-nome">Visitante</strong>
          </div>
          <hr>
          <button id="toggle-tema" type="button">ğŸŒ™ Modo Escuro</button>
          <button id="btn-sair" style="display:none;" type="button">ğŸšª Sair</button>
        </div>
      </div>
    </nav>
  </header>

  <!-- ===== SIDEBAR (fixa Ã  esquerda) ===== -->
  <!-- BotÃ£o SEMPRE visÃ­vel (fora do <main>) -->
  <button
    id="sidebar-toggle"
    type="button"
    aria-expanded="false"
    aria-controls="sidebar-content"
    aria-label="Abrir menu lateral"
  >â˜° Menu</button>

  <!-- ContÃªiner do off-canvas -->
  <aside
    id="sidebar"
    class="sidebar"
    data-state="closed"
    aria-label="Menu lateral"
  >
    <nav id="sidebar-content" class="sidebar-content" aria-hidden="true">
      <h3 class="sidebar-title">Categorias</h3>
      <ul class="sidebar-nav">
        <li><a href="{{ url_for('news.rss_dashboard_page') }}">ğŸ“° RSS Dashboard</a></li>
        <li><a href="{{ url_for('auth.publicar') }}">â• Publicar</a></li>
        <li><a href="{{ url_for('auth.home') }}">ğŸ  InÃ­cio</a></li>
      </ul>
    </nav>
  </aside>

  <!-- ===== CHAT FLOAT (inferior direito) ===== -->
  <button
    id="chatfloat-toggle"
    class="chatfloat-button"
    type="button"
    aria-expanded="false"
    aria-controls="chatfloat-panel"
    title="Abrir assistente"
  >ğŸ’¬</button>

  <div id="chatfloat-panel" class="chatfloat-panel" hidden role="dialog" aria-modal="false" aria-label="Assistente NewsTech">
    <div class="chatfloat-header">
      <strong>Assistente NewsTech</strong>
      <button id="chatfloat-close" class="chatfloat-close" type="button" title="Fechar" aria-label="Fechar">Ã—</button>
    </div>
    <div id="chatfloat-messages" class="chatfloat-messages">
      <div class="msg msg-assistant">OlÃ¡! Como posso ajudar vocÃª hoje? ğŸ˜Š</div>
    </div>
    <form id="chatfloat-form" class="chatfloat-form">
      <input id="chatfloat-input" type="text" placeholder="Digite sua mensagem..." autocomplete="off" />
      <button type="submit" title="Enviar" aria-label="Enviar">â¤</button>
    </form>
  </div>

  <!-- ===== CONTEÃšDO ===== -->
  <main>
    <h2>ğŸ“° Postagens da Comunidade</h2>

    <!-- TOOLBAR (usada pelo JS) -->
    <div class="toolbar" id="toolbar">
      <input id="q" type="search" placeholder="Buscar por tÃ­tulo ou conteÃºdo..." aria-label="Buscar" />
      <button id="btn-atualizar" class="btn" type="button">â†» Atualizar</button>
      <span id="contador" class="toolbar-count" aria-live="polite"></span>
    </div>

    <!-- Lista + paginaÃ§Ã£o -->
    <div id="lista-noticias"></div>
    <nav id="paginacao" class="paginacao" aria-label="PaginaÃ§Ã£o"></nav>
    <div id="vazio" class="lista-vazia" style="display:none;">Nenhuma notÃ­cia encontrada.</div>
  </main>

  <!-- ===== MODAL (ediÃ§Ã£o) ===== -->
  <div id="modal-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <header>
        <h3>Editar publicaÃ§Ã£o</h3>
        <button id="modal-close" class="close-x" type="button" aria-label="Fechar">âœ•</button>
      </header>
      <div class="modal-body">
        <div class="row">
          <label for="edit-titulo">TÃ­tulo</label>
          <input type="text" id="edit-titulo" />
        </div>
        <div class="row">
          <label for="edit-autor">Autor</label>
          <input type="text" id="edit-autor" />
        </div>
        <div class="row">
          <label for="edit-conteudo">ConteÃºdo</label>
          <textarea id="edit-conteudo" rows="6"></textarea>
        </div>
        <div class="row">
          <label for="edit-imagem">Imagem (opcional â€” deixa em branco para manter)</label>
          <input type="file" id="edit-imagem" accept="image/*" />
          <img id="edit-preview" class="img-preview" alt="PrÃ©via" style="display:none;">
        </div>
      </div>
      <footer>
        <button id="modal-cancel" class="btn secondary" type="button">Cancelar</button>
        <button id="modal-save" class="btn" type="button">Salvar</button>
      </footer>
    </div>
  </div>

  <footer>
    <p>Â© 2025 Portal de NotÃ­cias - Criado por Bruna Oliveira e Diego Andrioli</p>
  </footer>

  <!-- JS (defer para garantir DOM pronto) -->
  <script src="{{ url_for('static', filename='js/script.js', v=version|default(0)) }}" defer></script>
  <script src="{{ url_for('static', filename='js/index.bundle.js', v=version|default(0)) }}" defer></script>
  <script src="{{ url_for('static', filename='js/sidebar.js', v=version|default(0)) }}" defer></script>
  <script src="{{ url_for('static', filename='js/chatfloat.js', v=version|default(0)) }}" defer></script>
</body>
